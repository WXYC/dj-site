name: Build and Deploy

on:
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]

jobs:
  build:

    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v3

    - name: Build and Deploy React app to GitHub Pages
      uses: omkartapale/react-deployment-gh-pages@v1.0.0
      
    env:
      CI: false
      NEXT_PUBLIC_AWS_USER_POOL_ID: ${{ secrets.AWS_USER_POOL_ID }}
      NEXT_PUBLIC_AWS_REGION: ${{ secrets.AWS_REGION }}
      NEXT_PUBLIC_AWS_CLIENT_ID: ${{ secrets.AWS_CLIENT_ID }}
      NEXT_PUBLIC_AWS_IDENTITY_POOL_ID: ${{ secrets.AWS_IDENTITY_POOL_ID }}
      NEXT_PUBLIC_LAST_FM_KEY: ${{ secrets.LAST_FM_KEY }}
      NEXT_PUBLIC_DISCOGS_CONSUMER_KEY: ${{ secrets.DISCOGS_CONSUMER_KEY }}
      NEXT_PUBLIC_DISCOGS_CONSUMER_SECRET: ${{ secrets.DISCOGS_CONSUMER_SECRET }}
